
<!DOCTYPE html>

<html lang="en">
<head>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta charset="utf-8"/>
<meta content="Docutils 0.17.1: http://docutils.sourceforge.net/" name="generator"/>
<title>Tutorial | PyMilvus 2.3.0 documentation</title>
<link href="_static/pygments.css" rel="stylesheet"/>
<link href="_static/theme.9297a650d9dd3016d913.css" rel="stylesheet"/>
<link href="_static/custom.css" rel="stylesheet"/>
<link href="search.html" rel="search" title="Search"/>
<link href="genindex.html" rel="index" title="Index"/>
<link href="pymilvus/index.html" rel="next" title="API Reference"/>
<link href="index.html" rel="prev" title="PyMilvus"/>
</head>
<body class="antialiased text-gray scroll-smooth">
<div class="min-h-screen xl:h-screen flex flex-col xl:grid xl:grid-layout print:block print:h-auto" data-action="keydown@window-&gt;search#focus " data-controller="sidebar search " id="page">
<a class="block transition -translate-x-full focus:translate-x-0 opacity-0 focus:opacity-100 text-xl bg-white p-4 z-20 absolute top-0 left-0 h-14" href="#tutorial" title="Skip navigation links">Skip to content</a>
<header class="grid-area-header z-10 h-14 fixed w-full top-0 print:hidden">
<div class="bg-gray-dark shadow-md flex items-center h-full xl:px-2 relative"><div class="flex items-center">
<button class="xl:hidden h-14 w-14 leading-14 text-gray-100 hover:bg-gray-700 hover:text-brand focus:outline-none focus:bg-gray-700 focus:text-brand" data-action="sidebar#open" data-sidebar-target="hamburger">
<span class="sr-only">Open navigation menu</span>
<svg aria-hidden="true" class="fill-current h-8 w-8" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg>
</button><a class="hover:bg-gray-700 focus:bg-gray-700 focus:outline-none" href="index.html" title="Back to homepage"><span class="hidden lg:inline-block shrink-0 font-medium text-gray-100 mx-5 leading-14 tracking-wider">PyMilvus 2.3.0 documentation</span>
</a></div><div class="flex justify-end items-center flex-1"><form action="search.html" class="flex print:hidden justify-between items-center leading-14 md:ml-4 bg-gray-dark text-gray-300 focus-within:bg-gray-50 focus-within:text-gray-800 focus-within:absolute focus-within:inset-x-0 focus-within:top-0 md:focus-within:w-full md:focus-within:static z-10" data-action="click-&gt;search#focusSearchInput" id="searchbox" method="get">
<button aria-label="Get search results" class="text-inherit h-14 w-14" tabindex="-1">
<svg aria-hidden="true" class="fill-current stroke-current h-8 w-8" stroke-width="0.5" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg>
</button>
<input aria-label="Search the docs" class="pr-2 bg-transparent text-inherit focus:outline-none w-0 md:w-auto focus:w-full transition-all duration-100" data-search-target="searchInput" id="search-input" name="q" placeholder="Search the docs" type="search"/>
</form></div>
</div>
</header>
<aside class="grid-area-sidebar h-full fixed pt-14 xl:relative inset-y-0 left-0 z-20 xl:z-0 print:hidden overflow-y-auto transition-all transform transform-gpu -translate-x-full opacity-0 duration-300 xl:translate-x-0 xl:opacity-100" data-sidebar-target="sidebar">
<nav class="h-full overflow-y-auto bg-white text-gray-600 pt-8 flex flex-col" role="navigation">
<div class="nav-toc flex-1 pl-6"><ul class="current">
<li class="toctree-l1 current expanded"><div class="nav-link"><svg class="expand" data-action="click-&gt;sidebar#expand keydown-&gt;sidebar#expandKeyPressed" tabindex="0" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg><a class="current reference internal" data-action="click-&gt;sidebar#close" href="#">Tutorial</a></div><ul>
<li class="toctree-l2"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="#prerequisites">Prerequisites</a></div></li>
<li class="toctree-l2"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="#connect-to-your-milvus-database">Connect to Your Milvus Database</a></div></li>
<li class="toctree-l2"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="#create-a-schema">Create a Schema</a></div></li>
<li class="toctree-l2"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="#create-a-collection">Create a Collection</a></div></li>
<li class="toctree-l2"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="#create-an-index">Create an Index</a></div></li>
<li class="toctree-l2"><div class="nav-link"><svg class="expand" data-action="click-&gt;sidebar#expand keydown-&gt;sidebar#expandKeyPressed" tabindex="0" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg><a class="reference internal" data-action="click-&gt;sidebar#close" href="#insert-some-entities">Insert Some Entities</a></div><ul>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="#insert-data-records-one-by-one">Insert data records one by one</a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="#insert-the-whole-dataset-at-a-time">Insert the whole dataset at a time</a></div></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><div class="nav-link"><svg class="expand" data-action="click-&gt;sidebar#expand keydown-&gt;sidebar#expandKeyPressed" tabindex="0" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/index.html">API Reference</a></div><ul>
<li class="toctree-l2"><div class="nav-link"><svg class="expand" data-action="click-&gt;sidebar#expand keydown-&gt;sidebar#expandKeyPressed" tabindex="0" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/index.html#functions">Functions</a></div><ul>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/create_collection.html"><code class="xref py py-meth docutils literal notranslate">create_collection()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/create_schema.html"><code class="xref py py-meth docutils literal notranslate">create_schema()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/describe_collection.html"><code class="xref py py-meth docutils literal notranslate">describe_collection()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/load_collection.html"><code class="xref py py-meth docutils literal notranslate">load_collection()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/release_collection.html"><code class="xref py py-meth docutils literal notranslate">release_collection()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/drop_collection.html"><code class="xref py py-meth docutils literal notranslate">drop_collection()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/get_collection_statistics.html"><code class="xref py py-meth docutils literal notranslate">get_collection_statistics()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/list_collections.html"><code class="xref py py-mod docutils literal notranslate">list_collections()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/has_collection.html"><code class="xref py py-meth docutils literal notranslate">has_collection()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/create_index.html"><code class="xref py py-meth docutils literal notranslate">create_index()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/describe_index.html"><code class="xref py py-meth docutils literal notranslate">describe_index()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/drop_index.html"><code class="xref py py-meth docutils literal notranslate">drop_index()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/insert.html"><code class="xref py py-meth docutils literal notranslate">insert()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/bulk_insert.html"><code class="xref py py-meth docutils literal notranslate">bulk_insert()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/flush.html"><code class="xref py py-mod docutils literal notranslate">flush()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/list_bulk_insert_tasks.html"><code class="xref py py-mod docutils literal notranslate">list_bulk_insert_tasks()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/get_bulk_insert_state.html"><code class="xref py py-mod docutils literal notranslate">get_bulk_insert_state()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/delete.html"><code class="xref py py-func docutils literal notranslate">delete()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/delete_by_expr.html"><code class="xref py py-func docutils literal notranslate">delete_by_expr()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/create_partition.html"><code class="xref py py-meth docutils literal notranslate">create_partition()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/describe_partition.html"><code class="xref py py-meth docutils literal notranslate">describe_partition()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/load_partition.html"><code class="xref py py-meth docutils literal notranslate">load_partition()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/release_partition.html"><code class="xref py py-meth docutils literal notranslate">release_partition()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/drop_partition.html"><code class="xref py py-meth docutils literal notranslate">drop_partition()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/get_partition_statistics.html"><code class="xref py py-meth docutils literal notranslate">get_partition_statistics()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/list_partitions.html"><code class="xref py py-mod docutils literal notranslate">list_partitions()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/has_partition.html"><code class="xref py py-meth docutils literal notranslate">has_partition()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/create_alias.html"><code class="xref py py-meth docutils literal notranslate">create_alias()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/alter_alias.html"><code class="xref py py-meth docutils literal notranslate">alter_alias()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/list_aliases.html"><code class="xref py py-mod docutils literal notranslate">list_aliases()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/drop_alias.html"><code class="xref py py-meth docutils literal notranslate">drop_alias()</code></a></div></li>
</ul>
</li>
<li class="toctree-l2"><div class="nav-link"><svg class="expand" data-action="click-&gt;sidebar#expand keydown-&gt;sidebar#expandKeyPressed" tabindex="0" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/index.html#classes">Classes</a></div><ul>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/CollectionSchema/index.html"><code class="xref py py-mod docutils literal notranslate">CollectionSchema()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/Task/index.html"><code class="xref py py-mod docutils literal notranslate">Task()</code></a></div></li>
</ul>
</li>
<li class="toctree-l2"><div class="nav-link"><svg class="expand" data-action="click-&gt;sidebar#expand keydown-&gt;sidebar#expandKeyPressed" tabindex="0" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/index.html#enums">Enums</a></div><ul>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/enums/ConsistencyLevel.html"><code class="xref py py-enum docutils literal notranslate">ConsistencyLevel()</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="pymilvus/enums/DataType.html"><code class="xref py py-enum docutils literal notranslate">DataType()</code></a></div></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="changelog.html">Changelogs</a></div></li>
</ul>
</div>
<button class="text-4xl text-gray-800 p-4 bottom-0 hover:text-brand xl:hidden focus:text-brand self-center" data-action="sidebar#close" title="Close navigation menu">
<span class="sr-only">Close navigation menu</span>
<svg aria-hidden="true" class="fill-current stroke-current h-6 w-6" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</aside>
<main class="px-4 pt-14 xl:ml-fluid grid-area-main overflow-y-auto flex flex-col flex-1 h-full mx-0 md:mx-auto xl:mr-0"><nav aria-label="breadcrumbs" class="print:hidden mt-12 text-sm text-gray-light" role="navigation">
<a class="text-gray-light text-sm hover:text-gray-dark font-medium focus:text-gray-dark" href="index.html">PyMilvus 2.3.0 documentation</a>
<span class="mr-1">/</span><span aria-current="page">Tutorial</span>
</nav>
<article class="flex-1" role="main">
<section id="tutorial">
<h1>Tutorial<a aria-label="Click to copy this link" class="headerlink tooltipped tooltipped-ne" data-action="click-&gt;clipboard#copyHeaderLink" data-controller="clipboard" href="#tutorial"><span>#</span></a></h1>
<p>This tutorial guides you through how to work with Milvus and PyMilvus.</p>
<section id="prerequisites">
<h2>Prerequisites<a aria-label="Click to copy this link" class="headerlink tooltipped tooltipped-ne" data-action="click-&gt;clipboard#copyHeaderLink" data-controller="clipboard" href="#prerequisites"><span>#</span></a></h2>
<p>Before we start, ensure that you have a PyMilvus distribution <a class="reference internal" href="index.html#installation"><span class="std std-ref">installed</span></a>. You can verify this by running the following in the Python shell without any prompted errors.</p>
<div class="code-wrapper" data-controller="code">
<div class="code-header">
<span class="code-lang">default</span></div>
<div class="highlight"><pre><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pymilvus</span>
</code></pre></div></div>
<p>This tutorial also assumes that a Milvus instance is running on <code class="code docutils literal notranslate">localhost:19530</code>. To install Milvus, refer to <a class="reference external" href="https://milvus.io/docs/install_standalone-operator.md" rel="nofollow noopener">Install Milvus Standalone<svg aria-hidden="true" class="external-link-icon" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 19H5V5h7V3H5a2 2 0 00-2 2v14a2 2 0 002 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"></path></svg></a> and <a class="reference external" href="https://milvus.io/docs/install_cluster-milvusoperator.md" rel="nofollow noopener">Install Milvus Cluster<svg aria-hidden="true" class="external-link-icon" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 19H5V5h7V3H5a2 2 0 00-2 2v14a2 2 0 002 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"></path></svg></a> for details.</p>
</section>
<section id="connect-to-your-milvus-database">
<h2>Connect to Your Milvus Database<a aria-label="Click to copy this link" class="headerlink tooltipped tooltipped-ne" data-action="click-&gt;clipboard#copyHeaderLink" data-controller="clipboard" href="#connect-to-your-milvus-database"><span>#</span></a></h2>
<p>After you install a Milvus database, you can connect to it as follows:</p>
<div class="code-wrapper" data-controller="code">
<div class="code-header">
<span class="code-lang">default</span></div>
<div class="highlight"><pre><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pymilvus</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MILVUS_HOST_IP</span> <span class="o">=</span> <span class="s1">'localhost'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MILVUS_HOST_PORT</span> <span class="o">=</span> <span class="s1">'19530'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">pymilvus</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">MILVUS_HOST_IP</span><span class="p">,</span> <span class="n">MILVUS_HOST_PORT</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'Succeeded in connecting to Milvus.'</span><span class="p">)</span>
<span class="gp">... </span><span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'Failed to connect to Milvus.'</span><span class="p">)</span>
</code></pre></div></div>
<p>If the connection succeeds, you should see the following message:</p>
<div class="code-wrapper" data-controller="code">
<div class="code-header">
<span class="code-lang">shell</span></div>
<div class="highlight"><pre><code>Succeeded <span class="k">in</span> connecting to Milvus.
</code></pre></div></div>
<p>If the connection fails, you should see the following message:</p>
<div class="code-wrapper" data-controller="code">
<div class="code-header">
<span class="code-lang">shell</span></div>
<div class="highlight"><pre><code>Failed to connect to Milvus.
</code></pre></div></div>
</section>
<section id="create-a-schema">
<h2>Create a Schema<a aria-label="Click to copy this link" class="headerlink tooltipped tooltipped-ne" data-action="click-&gt;clipboard#copyHeaderLink" data-controller="clipboard" href="#create-a-schema"><span>#</span></a></h2>
<p>In a running Milvus instance, you can create multiple independent collections, each of which has its own data structure. In Milvus, we address the data structure of a collection <strong>schema</strong>, and data records in the collection <strong>entities</strong>.</p>
<p>You should create a schema before creating a collection and doing this is not a big deal:</p>
<div class="code-wrapper" data-controller="code">
<div class="code-header">
<span class="code-lang">default</span></div>
<div class="highlight"><pre><code><span class="gp">&gt;&gt;&gt; </span><span class="n">pymilvus</span><span class="o">.</span><span class="n">create_schema</span><span class="p">()</span>
</code></pre></div></div>
<p>Running the above snippet creates an empty schema, to which you can add some fields using the chainable method <a class="reference internal" href="pymilvus/CollectionSchema/add_field.html"><span class="doc">add_field()</span></a>.</p>
<p>For each field, you should give it a name and a description, define its data type, and set other applicable attributes. Note that the attributes a field supports vary with its data type.</p>
<p>In this tutorial, we will use the following schema fields.</p>
<div class="code-wrapper" data-controller="code">
<div class="code-header">
<span class="code-lang">default</span></div>
<div class="highlight"><pre><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pymilvus</span> <span class="kn">import</span> <span class="n">DataType</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="n">pymilvus</span><span class="o">.</span><span class="n">create_schema</span><span class="p">()</span>
<span class="gp">... </span>          <span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="n">DataType</span><span class="o">.</span><span class="n">INT64</span><span class="p">,</span> <span class="n">is_primary</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"article id"</span><span class="p">)</span>
<span class="gp">... </span>          <span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">"title"</span><span class="p">,</span> <span class="n">DataType</span><span class="o">.</span><span class="n">VARCHAR</span><span class="p">,</span> <span class="n">maxlength</span><span class="o">=</span><span class="mi">512</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"article title"</span><span class="p">)</span>
<span class="gp">... </span>          <span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">"title_vector"</span><span class="p">,</span> <span class="n">DataType</span><span class="o">.</span><span class="n">FLOAT_VECTOR</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">768</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"vector embeddings of title"</span><span class="p">)</span>
<span class="gp">... </span>          <span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">"link"</span><span class="p">,</span> <span class="n">DataType</span><span class="o">.</span><span class="n">STRING</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">512</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"url of the article"</span><span class="p">)</span>
<span class="gp">... </span>          <span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">"reading_time"</span><span class="p">,</span> <span class="n">DataType</span><span class="o">.</span><span class="n">INT64</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"reading time in minutes"</span><span class="p">)</span>
<span class="gp">... </span>          <span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">"publication"</span><span class="p">,</span> <span class="n">DataType</span><span class="o">.</span><span class="n">STRING</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">512</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"article category"</span><span class="p">)</span>
<span class="gp">... </span>          <span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">"claps"</span><span class="p">,</span> <span class="n">DataType</span><span class="o">.</span><span class="n">INT64</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"number of claps received"</span><span class="p">)</span>
<span class="gp">... </span>          <span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s2">"responses"</span><span class="p">,</span> <span class="n">DataType</span><span class="o">.</span><span class="n">INT64</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"number of comments received"</span><span class="p">)</span>
</code></pre></div></div>
</section>
<section id="create-a-collection">
<h2>Create a Collection<a aria-label="Click to copy this link" class="headerlink tooltipped tooltipped-ne" data-action="click-&gt;clipboard#copyHeaderLink" data-controller="clipboard" href="#create-a-collection"><span>#</span></a></h2>
<p>After the schema is ready, you can reference it while creating a collection:</p>
<div class="code-wrapper" data-controller="code">
<div class="code-header">
<span class="code-lang">default</span></div>
<div class="highlight"><pre><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">traceback</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">collection_name</span> <span class="o">=</span> <span class="s1">'medium_2020_dataset'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">collection_desc</span> <span class="o">=</span> <span class="s1">'A set of articles published on Medium in 2020'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">pymilvus</span><span class="o">.</span><span class="n">create_collection</span><span class="p">(</span><span class="n">collection_name</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span> <span class="n">collection_desc</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'Succeeded in creating collection </span><span class="si">%s</span><span class="s1">'</span> <span class="o">%</span> <span class="n">collection_name</span><span class="p">)</span>
<span class="gp">... </span><span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'Oops! Something occured:</span><span class="se">\n</span><span class="s1"> </span><span class="si">%s</span><span class="s1">'</span> <span class="o">%</span> <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">())</span>
</code></pre></div></div>
<p>If Milvus succeeds in creating this collection, you will see:</p>
<div class="code-wrapper" data-controller="code">
<div class="code-header">
<span class="code-lang">default</span></div>
<div class="highlight"><pre><code><span class="n">Succeeded</span> <span class="ow">in</span> <span class="n">creating</span> <span class="n">collection</span> <span class="n">medium_2020_dataset</span><span class="o">.</span>
</code></pre></div></div>
<p>Otherwise, you will see a traceback information instead.</p>
</section>
<section id="create-an-index">
<h2>Create an Index<a aria-label="Click to copy this link" class="headerlink tooltipped tooltipped-ne" data-action="click-&gt;clipboard#copyHeaderLink" data-controller="clipboard" href="#create-an-index"><span>#</span></a></h2>
<p>All Approximate Nearest Neighbor (ANN) searches in Milvus rely on indexes for extremely high performance. Before any ANN searches, you have to create indexes on the vector field in your collection.</p>
<p>Now, we’ll create an index for the vector field <code class="code docutils literal notranslate">title_vector</code> in the collection just created.</p>
<div class="code-wrapper" data-controller="code">
<div class="code-header">
<span class="code-lang">default</span></div>
<div class="highlight"><pre><code><span class="gp">&gt;&gt;&gt; </span><span class="n">index_params</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s2">"index_type"</span><span class="p">:</span> <span class="s1">'IVF_FLAT'</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s2">"metric_type"</span><span class="p">:</span> <span class="s1">'IP'</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s2">"params"</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"nlist"</span><span class="p">:</span> <span class="mi">1024</span> <span class="p">}</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">task</span> <span class="o">=</span> <span class="n">pymilvus</span><span class="o">.</span><span class="n">create_index</span><span class="p">(</span><span class="s1">'medium_2020_dataset'</span><span class="p">,</span> <span class="s1">'title_vector'</span><span class="p">,</span> <span class="s1">'title_vector_IF_IP'</span><span class="p">,</span> <span class="n">index_params</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">task</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
</code></pre></div></div>
<p>In the above snippet, we have set <code class="code docutils literal notranslate">index_type</code> to <code class="code docutils literal notranslate">IVF_FLAT</code> and <code class="code docutils literal notranslate">metric_type</code> to <code class="code docutils literal notranslate">IP</code>. There are also other index types and metric types. For details, see <a class="reference external" href="https://milvus.io/docs/index.md" rel="nofollow noopener">In-memory Index<svg aria-hidden="true" class="external-link-icon" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 19H5V5h7V3H5a2 2 0 00-2 2v14a2 2 0 002 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"></path></svg></a> and <a class="reference external" href="https://milvus.io/docs/disk_index.md" rel="nofollow noopener">On-disk Index<svg aria-hidden="true" class="external-link-icon" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 19H5V5h7V3H5a2 2 0 00-2 2v14a2 2 0 002 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"></path></svg></a>.</p>
<p>Running <a class="reference internal" href="pymilvus/create_index.html"><span class="doc">create_index()</span></a> lasts for a little while no matter what index type is in use. Just take a sip of coffee if it is by your hands and wait for the index to be created.</p>
<p>Till now, a brand new collection is ready for data input. Congrats!</p>
</section>
<section id="insert-some-entities">
<h2>Insert Some Entities<a aria-label="Click to copy this link" class="headerlink tooltipped tooltipped-ne" data-action="click-&gt;clipboard#copyHeaderLink" data-controller="clipboard" href="#insert-some-entities"><span>#</span></a></h2>
<p>In PyMilvus, you can either use <a class="reference internal" href="pymilvus/insert.html"><span class="doc">insert()</span></a> to insert data records one after another or use <a class="reference internal" href="pymilvus/bulk_insert.html"><span class="doc">bulk_insert()</span></a> to insert the whole dataset at a time.</p>
<p>Based on the schema created in a previous step, you can download the corresponding dataset <a class="reference external" href="#" rel="nofollow noopener">here<svg aria-hidden="true" class="external-link-icon" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 19H5V5h7V3H5a2 2 0 00-2 2v14a2 2 0 002 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"></path></svg></a>, which is a row-based JSON file.</p>
<section id="insert-data-records-one-by-one">
<h3>Insert data records one by one<a aria-label="Click to copy this link" class="headerlink tooltipped tooltipped-ne" data-action="click-&gt;clipboard#copyHeaderLink" data-controller="clipboard" href="#insert-data-records-one-by-one"><span>#</span></a></h3>
<p>To insert data records one after another, you have to process the dataset for a little bit.</p>
<div class="code-wrapper" data-controller="code">
<div class="code-header">
<span class="code-lang">default</span></div>
<div class="highlight"><pre><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s2">"medium_2020_dataset.json"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">keys</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">'rows'</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">([</span> <span class="n">row</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">'rows'</span><span class="p">]</span> <span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pymilvus</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="s2">"medium_2020_dataset"</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</code></pre></div></div>
<p>In the above snippet, we read the JSON file into memory and strip off the keys in each record to convert the dataset into a list of value lists. Then use <a class="reference internal" href="pymilvus/insert.html"><span class="doc">insert()</span></a> to add the list into the collection.</p>
<p>Since the <a class="reference internal" href="pymilvus/insert.html"><span class="doc">insert()</span></a> function uses a loop to insert the members of the input list and may be time-consuming if the list contains abundant high-dimensional members. You are advised to split your dataset into smaller chunks to prevent the insert process from lasting for a long time.</p>
</section>
<section id="insert-the-whole-dataset-at-a-time">
<h3>Insert the whole dataset at a time<a aria-label="Click to copy this link" class="headerlink tooltipped tooltipped-ne" data-action="click-&gt;clipboard#copyHeaderLink" data-controller="clipboard" href="#insert-the-whole-dataset-at-a-time"><span>#</span></a></h3>
</section>
</section>
</section>
</article>
<footer>
<div class="mt-20 mb-4 text-sm text-gray-700 print:mt-4">© 2023, Milvus Made with <a href="https://www.sphinx-doc.org">Sphinx 5.3.0</a></div>
</footer></main>
<button class="fixed bottom-0 right-0 z-20 opacity-0 p-4 m-4 tracking-wide bg-gray-900 text-gray-100 transition transform transform-gpu duration-500 translate-y-full" data-action="search#hideSnackbar" data-search-target="snackbar">
  Clear highlights
</button><div class="fixed hidden inset-0 bg-black bg-opacity-50" data-action="click-&gt;sidebar#close" data-sidebar-target="screen">
</div>
</div>
<script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
<script src="_static/jquery.js"></script>
<script src="_static/underscore.js"></script>
<script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
<script src="_static/doctools.js"></script>
<script src="_static/sphinx_highlight.js"></script>
<script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
<script src="_static/theme.3051a0ec24cad00d4d88.js"></script>
</body>
</html>